name: update-server
run-name: Updated by ${{ github.actor }}.
on: 
  push:
    branches:    
      - main
jobs:
  update-docker-container:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v3
      - run: echo "${{ vars.BACKEND_ENV_FILE }}" > ./backend/.env
      - run: echo "${{ vars.FRONTEND_ENV_FILE }}" > ./frontend/.env
      - run: pwd
      - run: cd backend && pwd
      - run: docker compose up -d --build
      - run: cd ../frontend
      - run: docker compose up -d --build